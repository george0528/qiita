{"remainingRequest":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\src\\views\\Rank.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\src\\views\\Rank.vue","mtime":1638177040844},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBzZWFyY2hfY29udGVudHM6IHt9LA0KICAgICAgICBzZWFyY2hfa2V5d29yZDogJycsDQogICAgICAgIHNlYXJjaF91cmw6ICcnLA0KICAgICAgICBzZWFyY2hfZGF5czogNywNCiAgICAgICAgc2VsZWN0X2RhdGU6ICcnLA0KICAgICAgICB1cmw6ICcnLA0KICAgICAgICBwZXJfcGFnZTogMjAsDQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIHF1ZXJ5X3BhcmFtOiAnJywNCiAgICAgICAgY29udGVudHM6IHt9LA0KICAgICAgICBsb2FkOiBmYWxzZSAsDQogICAgICB9Ow0KICAgIH0gLA0KICBtZXRob2RzIDogew0KICAgIGJhc2VfdXJsX3NldCgpIHsNCiAgICAgIHRoaXMudXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9xaWl0YS5jb20vYXBpL3YyL2l0ZW1zJyk7DQogICAgICBsZXQgcGFyYW1zID0gdGhpcy51cmwuc2VhcmNoUGFyYW1zOw0KICAgICAgcGFyYW1zLnNldCgncGVyX3BhZ2UnLCB0aGlzLnBlcl9wYWdlKTsNCiAgICAgIHBhcmFtcy5zZXQoJ3BhZ2UnLCB0aGlzLnBhZ2UpOw0KICAgICAgdGhpcy5xdWVyeV9wYXJhbSA9IGBzdG9ja3M6PiR7dGhpcy5zZWFyY2hfZGF5c31gOw0KICAgICAgdmFyIGRheSA9IHRoaXMuZ2V0X2RhdGUodGhpcy5zZWFyY2hfZGF5cyk7DQogICAgICB0aGlzLnF1ZXJ5X3BhcmFtX3NldChkYXkpOw0KICAgICAgaWYodGhpcy5xdWVyeV9wYXJhbSkgew0KICAgICAgICBwYXJhbXMuc2V0KCdxdWVyeScsIHRoaXMucXVlcnlfcGFyYW0pDQogICAgICB9DQogICAgfSwNCiAgICAvLyBzZWFyY2goZGF5cykgew0KICAgIC8vICAgICB2YXIgZGF5ID0gdGhpcy5nZXRfZGF0ZSh0aGlzLnNlYXJjaF9kYXlzKTsNCiAgICAvLyAgICAgbGV0IHBhcmFtcyA9IHRoaXMudXJsLnNlYXJjaFBhcmFtczsNCiAgICAvLyB9LA0KICAgIHF1ZXJ5X3BhcmFtX3NldChwYXJhbSkgew0KICAgICAgdGhpcy5xdWVyeV9wYXJhbSA9IHRoaXMucXVlcnlfcGFyYW0rcGFyYW07DQogICAgfSwNCiAgICBhc3luYyBnZXRfY29udGVudHMoKSB7DQogICAgICB0aGlzLmxvYWQgPSB0cnVlOw0KICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYXhpb3MuZ2V0KHRoaXMudXJsLHsNCiAgICAgICAgaGVhZGVyczogeyJBdXRob3JpemF0aW9uIjoiQmVhcmVyIDVmYmU3N2UwYWNkMWNiMzRiMmQyZTA4NzdiNjhmYWI2NzI5Y2EyNTEifSwNCiAgICAgICAgZGF0YToge30sDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIGxldCBjb250ZW50cyA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIC8vIOmFjeWIl+OBjOepuuOBruaZgg0KICAgICAgICBpZighY29udGVudHMubGVuZ3RoKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ+mFjeWIl+OBjOepuuOBp+OBmeOAgeacgOW+jOOBrumFjeWIl+OBp+OBmScpOw0KICAgICAgICAgIHRoaXMuc29ydF9saWtlKHRoaXMuY29udGVudHMpOw0KICAgICAgICAgIHRoaXMuY29udGVudHMuc3BsaWNlKDIwKTsNCiAgICAgICAgICB0aGlzLnNlYXJjaF9jb250ZW50cyA9IHRoaXMuY29udGVudHM7DQogICAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIC8vIOmFjeWIl+i/veWKoA0KICAgICAgICBpZih0aGlzLmNvbnRlbnRzLmxlbmd0aCkgew0KICAgICAgICAgIHRoaXMuY29udGVudHMgPSB0aGlzLmNvbnRlbnRzLmNvbmNhdChjb250ZW50cyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5jb250ZW50cyA9IGNvbnRlbnRzOw0KICAgICAgICB9DQogICAgICAgIC8vIOacgOW+jA0KICAgICAgICBpZihjb250ZW50cy5sZW5ndGggPCB0aGlzLnBlcl9wYWdlKSB7DQogICAgICAgICAgdGhpcy5zb3J0X2xpa2UodGhpcy5jb250ZW50cyk7DQogICAgICAgICAgdGhpcy5jb250ZW50cy5zcGxpY2UoMjApOw0KICAgICAgICAgIHRoaXMuc2VhcmNoX2NvbnRlbnRzID0gdGhpcy5jb250ZW50czsNCiAgICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0X2RhdGUoZGF5KSB7DQogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgIHZhciBzZWxlY3RfZGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSAtIGRheSk7DQogICAgICB2YXIgcXVlcnlfc2VsZWN0X2RhdGUgPSBgIGNyZWF0ZWQ6Pj0ke3NlbGVjdF9kYXRlLmdldEZ1bGxZZWFyKCl9LSR7c2VsZWN0X2RhdGUuZ2V0TW9udGgoKSArIDF9LSR7c2VsZWN0X2RhdGUuZ2V0RGF0ZSgpfWA7DQogICAgICByZXR1cm4gcXVlcnlfc2VsZWN0X2RhdGU7DQogICAgfSwNCiAgICBzb3J0X2xpa2UoY29udGVudHMpIHsNCiAgICAgIGNvbnRlbnRzLnNvcnQoZnVuY3Rpb24oYSxiKSB7DQogICAgICAgIGlmKGEubGlrZXNfY291bnQgPiBiLmxpa2VzX2NvdW50KSB7DQogICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiAxOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQgOiBhc3luYyBmdW5jdGlvbigpIHsNCiAgICB2YXIgbG9vcF9mbGFnID0gdHJ1ZTsNCiAgICB0aGlzLmJhc2VfdXJsX3NldCgpOw0KICAgIHdoaWxlKGxvb3BfZmxhZykgew0KICAgICAgbG9vcF9mbGFnID0gYXdhaXQgdGhpcy5nZXRfY29udGVudHMoKTsNCiAgICAgIHRoaXMucGFnZSsrOw0KICAgICAgbGV0IHBhcmFtcyA9IHRoaXMudXJsLnNlYXJjaFBhcmFtczsNCiAgICAgIHBhcmFtcy5zZXQoJ3BhZ2UnLCB0aGlzLnBhZ2UpOw0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBjb250ZW50c19sZW5ndGg6IGZ1bmN0aW9uICgpew0KICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc2VhcmNoX2NvbnRlbnRzKS5sZW5ndGg7DQogICAgfSwNCiAgICBjb250ZW50X2RhdGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbSkgew0KICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGl0ZW0uY3JlYXRlZF9hdCk7DQogICAgICAgIGxldCBkYXRlX3N0cmluZyA9IGAke2RhdGUuZ2V0RnVsbFllYXIoKX0uJHtkYXRlLmdldE1vbnRoKCkgKyAxfS4ke2RhdGUuZ2V0RGF0ZSgpfeaKleeov2A7DQogICAgICAgIHJldHVybiBkYXRlX3N0cmluZzsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Rank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Rank.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"Rank\">\r\n    <!-- <h2>{{url}}</h2> -->\r\n    <div class=\"load\">\r\n      <div v-if=\"load\" class=\"component_load_circle\"></div>\r\n    </div>\r\n    <!-- <div class=\"btns\">\r\n      <button @click=\"search(7)\" class=\"component_btn primary\">週間</button>\r\n      <button @click=\"search(30)\" class=\"component_btn primary\">月間</button>\r\n    </div> -->\r\n    <a class=\"content\" v-for=\"item in search_contents\" :href=\"item.url\" :key=\"item.id\">\r\n      <div class=\"left\">\r\n        <p class=\"date\">{{ content_date(item) }}</p>\r\n        <p class=\"title\">{{ item.title }}</p>\r\n        <div class=\"tags\">\r\n          <span v-for=\"tag in item.tags\" :key=\"tag.id\">{{ tag.name }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\"></div>\r\n      <div class=\"bottom\">\r\n        <div class=\"user\">\r\n          <img :src=\"item.user.profile_image_url\" alt=\"\">\r\n          <span>{{ item.user.name }}</span>\r\n        </div>\r\n        <div class=\"good\">\r\n          <img src=\"@/assets/img/good.png\" alt=\"\">\r\n          <span>{{ item.likes_count }}</span>\r\n        </div>\r\n      </div>\r\n    </a>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n      return {\r\n        search_contents: {},\r\n        search_keyword: '',\r\n        search_url: '',\r\n        search_days: 7,\r\n        select_date: '',\r\n        url: '',\r\n        per_page: 20,\r\n        page: 1,\r\n        query_param: '',\r\n        contents: {},\r\n        load: false ,\r\n      };\r\n    } ,\r\n  methods : {\r\n    base_url_set() {\r\n      this.url = new URL('https://qiita.com/api/v2/items');\r\n      let params = this.url.searchParams;\r\n      params.set('per_page', this.per_page);\r\n      params.set('page', this.page);\r\n      this.query_param = `stocks:>${this.search_days}`;\r\n      var day = this.get_date(this.search_days);\r\n      this.query_param_set(day);\r\n      if(this.query_param) {\r\n        params.set('query', this.query_param)\r\n      }\r\n    },\r\n    // search(days) {\r\n    //     var day = this.get_date(this.search_days);\r\n    //     let params = this.url.searchParams;\r\n    // },\r\n    query_param_set(param) {\r\n      this.query_param = this.query_param+param;\r\n    },\r\n    async get_contents() {\r\n      this.load = true;\r\n      return await this.axios.get(this.url,{\r\n        headers: {\"Authorization\":\"Bearer 5fbe77e0acd1cb34b2d2e0877b68fab6729ca251\"},\r\n        data: {},\r\n      })\r\n      .then((response) => {\r\n        let contents = response.data;\r\n        // 配列が空の時\r\n        if(!contents.length) {\r\n          console.log('配列が空です、最後の配列です');\r\n          this.sort_like(this.contents);\r\n          this.contents.splice(20);\r\n          this.search_contents = this.contents;\r\n          this.load = false;\r\n          return false;\r\n        }\r\n        // 配列追加\r\n        if(this.contents.length) {\r\n          this.contents = this.contents.concat(contents);\r\n        } else {\r\n          this.contents = contents;\r\n        }\r\n        // 最後\r\n        if(contents.length < this.per_page) {\r\n          this.sort_like(this.contents);\r\n          this.contents.splice(20);\r\n          this.search_contents = this.contents;\r\n          this.load = false;\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      });\r\n    },\r\n    get_date(day) {\r\n      var now = new Date();\r\n      var select_date = new Date(now.getFullYear(), now.getMonth(), now.getDate() - day);\r\n      var query_select_date = ` created:>=${select_date.getFullYear()}-${select_date.getMonth() + 1}-${select_date.getDate()}`;\r\n      return query_select_date;\r\n    },\r\n    sort_like(contents) {\r\n      contents.sort(function(a,b) {\r\n        if(a.likes_count > b.likes_count) {\r\n          return -1;\r\n        } else {\r\n          return 1;\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted : async function() {\r\n    var loop_flag = true;\r\n    this.base_url_set();\r\n    while(loop_flag) {\r\n      loop_flag = await this.get_contents();\r\n      this.page++;\r\n      let params = this.url.searchParams;\r\n      params.set('page', this.page);\r\n    }\r\n  },\r\n  computed: {\r\n    contents_length: function (){\r\n      return Object.keys(this.search_contents).length;\r\n    },\r\n    content_date: function() {\r\n        return function(item) {\r\n        let date = new Date(item.created_at);\r\n        let date_string = `${date.getFullYear()}.${date.getMonth() + 1}.${date.getDate()}投稿`;\r\n        return date_string;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  @import \"../assets/css/style.css\";\r\n  a {\r\n    color: black;\r\n    text-decoration: none;\r\n    text-align: left;\r\n    font-size: 0.8rem;\r\n  }\r\n  p {\r\n    margin: 0;\r\n  }\r\n  span {\r\n    font-size: 0.7rem;\r\n  }\r\n  .load {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10px 0;\r\n  }\r\n  a.contenet{\r\n    width: 100vw;\r\n  }\r\n  .content .left {\r\n    width: 90%;\r\n  }\r\n  .content .left .date {\r\n    color: gray;\r\n    font-size: 0.7rem;\r\n  }\r\n  .content .left .title {\r\n    font-weight: bold;\r\n    padding: 0;\r\n    margin: 2.5px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    /* max-height: 37px;\r\n    overflow: hidden; */\r\n  }\r\n  .content .left .tags {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n  .content .left .tags span {\r\n    margin-right: 4px;\r\n    color: gray;\r\n  }\r\n  .content .bottom {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 40px;\r\n    margin: 2.5px 0;\r\n  }\r\n  .content .bottom .user {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .content .bottom .user img {\r\n    display: block;\r\n    width: 25px;\r\n    height: auto;\r\n    margin-right: 10px;\r\n    border-radius: 50%;\r\n  }\r\n  .content .bottom .good {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .content .bottom .good span {\r\n    display: block;\r\n    margin:0 5px;\r\n  }\r\n  .content .bottom .good img{\r\n    display: block;\r\n    margin:0 5px;\r\n    width: 15px;\r\n  }\r\n</style>"]}]}