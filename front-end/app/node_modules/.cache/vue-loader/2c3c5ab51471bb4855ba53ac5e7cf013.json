{"remainingRequest":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\src\\views\\NewRank.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\src\\views\\NewRank.vue","mtime":1638283534782},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHNlYXJjaF9jb250ZW50czoge30sCiAgICAgICAgc2VhcmNoX2tleXdvcmQ6ICcnLAogICAgICAgIHNlYXJjaF91cmw6ICcnLAogICAgICAgIHNlYXJjaF9kYXlzOiA3LAogICAgICAgIHNlbGVjdF9kYXRlOiAnJywKICAgICAgICB1cmw6ICcnLAogICAgICAgIHBlcl9wYWdlOiAyMCwKICAgICAgICBwYWdlOiAxLAogICAgICAgIHF1ZXJ5X3BhcmFtOiAnJywKICAgICAgICBjb250ZW50czoge30sCiAgICAgICAgbG9hZDogZmFsc2UgLAogICAgICB9OwogICAgfSAsCiAgbWV0aG9kcyA6IHsKICAgIGJhc2VfdXJsX3NldCgpIHsKICAgICAgdGhpcy51cmwgPSBuZXcgVVJMKCdodHRwczovL3FpaXRhLmNvbS9hcGkvdjIvaXRlbXMnKTsKICAgICAgbGV0IHBhcmFtcyA9IHRoaXMudXJsLnNlYXJjaFBhcmFtczsKICAgICAgcGFyYW1zLnNldCgncGVyX3BhZ2UnLCB0aGlzLnBlcl9wYWdlKTsKICAgICAgcGFyYW1zLnNldCgncGFnZScsIHRoaXMucGFnZSk7CiAgICAgIHRoaXMucXVlcnlfcGFyYW0gPSBgc3RvY2tzOj4ke3RoaXMuc2VhcmNoX2RheXN9YDsKICAgICAgdmFyIGRheSA9IHRoaXMuZ2V0X2RhdGUodGhpcy5zZWFyY2hfZGF5cyk7CiAgICAgIHRoaXMucXVlcnlfcGFyYW1fc2V0KGRheSk7CiAgICAgIGlmKHRoaXMucXVlcnlfcGFyYW0pIHsKICAgICAgICBwYXJhbXMuc2V0KCdxdWVyeScsIHRoaXMucXVlcnlfcGFyYW0pCiAgICAgIH0KICAgIH0sCiAgICAvLyBzZWFyY2goZGF5cykgewogICAgLy8gICAgIHZhciBkYXkgPSB0aGlzLmdldF9kYXRlKHRoaXMuc2VhcmNoX2RheXMpOwogICAgLy8gICAgIGxldCBwYXJhbXMgPSB0aGlzLnVybC5zZWFyY2hQYXJhbXM7CiAgICAvLyB9LAogICAgcXVlcnlfcGFyYW1fc2V0KHBhcmFtKSB7CiAgICAgIHRoaXMucXVlcnlfcGFyYW0gPSB0aGlzLnF1ZXJ5X3BhcmFtK3BhcmFtOwogICAgfSwKICAgIGFzeW5jIGdldF9jb250ZW50cygpIHsKICAgICAgdGhpcy5sb2FkID0gdHJ1ZTsKICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYXhpb3MuZ2V0KHRoaXMudXJsLHsKICAgICAgICBoZWFkZXJzOiB7IkF1dGhvcml6YXRpb24iOiJCZWFyZXIgNWZiZTc3ZTBhY2QxY2IzNGIyZDJlMDg3N2I2OGZhYjY3MjljYTI1MSJ9LAogICAgICAgIGRhdGE6IHt9LAogICAgICB9KQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBsZXQgY29udGVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIC8vIOmFjeWIl+OBjOepuuOBruaZggogICAgICAgIGlmKCFjb250ZW50cy5sZW5ndGgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfphY3liJfjgYznqbrjgafjgZnjgIHmnIDlvozjga7phY3liJfjgafjgZknKTsKICAgICAgICAgIHRoaXMuc29ydF9saWtlKHRoaXMuY29udGVudHMpOwogICAgICAgICAgdGhpcy5jb250ZW50cy5zcGxpY2UoMjApOwogICAgICAgICAgdGhpcy5zZWFyY2hfY29udGVudHMgPSB0aGlzLmNvbnRlbnRzOwogICAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIOmFjeWIl+i/veWKoAogICAgICAgIGlmKHRoaXMuY29udGVudHMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmNvbnRlbnRzID0gdGhpcy5jb250ZW50cy5jb25jYXQoY29udGVudHMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbnRlbnRzID0gY29udGVudHM7CiAgICAgICAgfQogICAgICAgIC8vIOacgOW+jAogICAgICAgIGlmKGNvbnRlbnRzLmxlbmd0aCA8IHRoaXMucGVyX3BhZ2UpIHsKICAgICAgICAgIHRoaXMuc29ydF9saWtlKHRoaXMuY29udGVudHMpOwogICAgICAgICAgdGhpcy5jb250ZW50cy5zcGxpY2UoMjApOwogICAgICAgICAgdGhpcy5zZWFyY2hfY29udGVudHMgPSB0aGlzLmNvbnRlbnRzOwogICAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0X2RhdGUoZGF5KSB7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgc2VsZWN0X2RhdGUgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkgLSBkYXkpOwogICAgICB2YXIgcXVlcnlfc2VsZWN0X2RhdGUgPSBgIGNyZWF0ZWQ6Pj0ke3NlbGVjdF9kYXRlLmdldEZ1bGxZZWFyKCl9LSR7c2VsZWN0X2RhdGUuZ2V0TW9udGgoKSArIDF9LSR7c2VsZWN0X2RhdGUuZ2V0RGF0ZSgpfWA7CiAgICAgIHJldHVybiBxdWVyeV9zZWxlY3RfZGF0ZTsKICAgIH0sCiAgICBzb3J0X2xpa2UoY29udGVudHMpIHsKICAgICAgY29udGVudHMuc29ydChmdW5jdGlvbihhLGIpIHsKICAgICAgICBpZihhLmxpa2VzX2NvdW50ID4gYi5saWtlc19jb3VudCkgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZCA6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgdmFyIGxvb3BfZmxhZyA9IHRydWU7CiAgICB0aGlzLmJhc2VfdXJsX3NldCgpOwogICAgd2hpbGUobG9vcF9mbGFnKSB7CiAgICAgIGxvb3BfZmxhZyA9IGF3YWl0IHRoaXMuZ2V0X2NvbnRlbnRzKCk7CiAgICAgIHRoaXMucGFnZSsrOwogICAgICBsZXQgcGFyYW1zID0gdGhpcy51cmwuc2VhcmNoUGFyYW1zOwogICAgICBwYXJhbXMuc2V0KCdwYWdlJywgdGhpcy5wYWdlKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb250ZW50c19sZW5ndGg6IGZ1bmN0aW9uICgpewogICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zZWFyY2hfY29udGVudHMpLmxlbmd0aDsKICAgIH0sCiAgICBjb250ZW50X2RhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpOwogICAgICAgIGxldCBkYXRlX3N0cmluZyA9IGAke2RhdGUuZ2V0RnVsbFllYXIoKX0uJHtkYXRlLmdldE1vbnRoKCkgKyAxfS4ke2RhdGUuZ2V0RGF0ZSgpfeaKleeov2A7CiAgICAgICAgcmV0dXJuIGRhdGVfc3RyaW5nOwogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["NewRank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewRank.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"NewRank\">\n    <!-- <h2>{{url}}</h2> -->\n    <div class=\"load\">\n      <div v-if=\"load\" class=\"component_load_circle\"></div>\n    </div>\n    <!-- <div class=\"btns\">\n      <button @click=\"search(7)\" class=\"component_btn primary\">週間</button>\n      <button @click=\"search(30)\" class=\"component_btn primary\">月間</button>\n    </div> -->\n    <a class=\"content\" v-for=\"item in search_contents\" :href=\"item.url\" :key=\"item.id\">\n      <div class=\"left\">\n        <p class=\"date\">{{ content_date(item) }}</p>\n        <p class=\"title\">{{ item.title }}</p>\n        <div class=\"tags\">\n          <span v-for=\"tag in item.tags\" :key=\"tag.id\">{{ tag.name }}</span>\n        </div>\n      </div>\n      <div class=\"right\"></div>\n      <div class=\"bottom\">\n        <div class=\"user\">\n          <img :src=\"item.user.profile_image_url\" alt=\"\">\n          <span>{{ item.user.name }}</span>\n        </div>\n        <div class=\"good\">\n          <img src=\"@/assets/img/good.png\" alt=\"\">\n          <span>{{ item.likes_count }}</span>\n        </div>\n      </div>\n    </a>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n      return {\n        search_contents: {},\n        search_keyword: '',\n        search_url: '',\n        search_days: 7,\n        select_date: '',\n        url: '',\n        per_page: 20,\n        page: 1,\n        query_param: '',\n        contents: {},\n        load: false ,\n      };\n    } ,\n  methods : {\n    base_url_set() {\n      this.url = new URL('https://qiita.com/api/v2/items');\n      let params = this.url.searchParams;\n      params.set('per_page', this.per_page);\n      params.set('page', this.page);\n      this.query_param = `stocks:>${this.search_days}`;\n      var day = this.get_date(this.search_days);\n      this.query_param_set(day);\n      if(this.query_param) {\n        params.set('query', this.query_param)\n      }\n    },\n    // search(days) {\n    //     var day = this.get_date(this.search_days);\n    //     let params = this.url.searchParams;\n    // },\n    query_param_set(param) {\n      this.query_param = this.query_param+param;\n    },\n    async get_contents() {\n      this.load = true;\n      return await this.axios.get(this.url,{\n        headers: {\"Authorization\":\"Bearer 5fbe77e0acd1cb34b2d2e0877b68fab6729ca251\"},\n        data: {},\n      })\n      .then((response) => {\n        let contents = response.data;\n        // 配列が空の時\n        if(!contents.length) {\n          console.log('配列が空です、最後の配列です');\n          this.sort_like(this.contents);\n          this.contents.splice(20);\n          this.search_contents = this.contents;\n          this.load = false;\n          return false;\n        }\n        // 配列追加\n        if(this.contents.length) {\n          this.contents = this.contents.concat(contents);\n        } else {\n          this.contents = contents;\n        }\n        // 最後\n        if(contents.length < this.per_page) {\n          this.sort_like(this.contents);\n          this.contents.splice(20);\n          this.search_contents = this.contents;\n          this.load = false;\n          return false;\n        } else {\n          return true;\n        }\n      });\n    },\n    get_date(day) {\n      var now = new Date();\n      var select_date = new Date(now.getFullYear(), now.getMonth(), now.getDate() - day);\n      var query_select_date = ` created:>=${select_date.getFullYear()}-${select_date.getMonth() + 1}-${select_date.getDate()}`;\n      return query_select_date;\n    },\n    sort_like(contents) {\n      contents.sort(function(a,b) {\n        if(a.likes_count > b.likes_count) {\n          return -1;\n        } else {\n          return 1;\n        }\n      });\n    }\n  },\n  mounted : async function() {\n    var loop_flag = true;\n    this.base_url_set();\n    while(loop_flag) {\n      loop_flag = await this.get_contents();\n      this.page++;\n      let params = this.url.searchParams;\n      params.set('page', this.page);\n    }\n  },\n  computed: {\n    contents_length: function (){\n      return Object.keys(this.search_contents).length;\n    },\n    content_date: function() {\n        return function(item) {\n        let date = new Date(item.created_at);\n        let date_string = `${date.getFullYear()}.${date.getMonth() + 1}.${date.getDate()}投稿`;\n        return date_string;\n      }\n    }\n  }\n}\n</script>\n<style>\n  @import \"../assets/css/style.css\";\n  a {\n    color: black;\n    text-decoration: none;\n    text-align: left;\n    font-size: 0.8rem;\n  }\n  p {\n    margin: 0;\n  }\n  span {\n    font-size: 0.7rem;\n  }\n  .load {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 10px 0;\n  }\n  a.contenet{\n    width: 100vw;\n  }\n  .content .left {\n    width: 90%;\n  }\n  .content .left .date {\n    color: gray;\n    font-size: 0.7rem;\n  }\n  .content .left .title {\n    font-weight: bold;\n    padding: 0;\n    margin: 2.5px 0;\n    display: flex;\n    align-items: center;\n    /* max-height: 37px;\n    overflow: hidden; */\n  }\n  .content .left .tags {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .content .left .tags span {\n    margin-right: 4px;\n    color: gray;\n  }\n  .content .bottom {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 40px;\n    margin: 2.5px 0;\n  }\n  .content .bottom .user {\n    display: flex;\n    align-items: center;\n  }\n  .content .bottom .user img {\n    display: block;\n    width: 25px;\n    height: auto;\n    margin-right: 10px;\n    border-radius: 50%;\n  }\n  .content .bottom .good {\n    display: flex;\n    align-items: center;\n  }\n  .content .bottom .good span {\n    display: block;\n    margin:0 5px;\n  }\n  .content .bottom .good img{\n    display: block;\n    margin:0 5px;\n    width: 15px;\n  }\n</style>"]}]}