{"remainingRequest":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\src\\views\\NewRank.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\src\\views\\NewRank.vue","mtime":1638369130240},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHVybDogJycsCiAgICAgICAgY29udGVudHM6IHt9LAogICAgICAgIGxvYWQ6IGZhbHNlICwKICAgICAgICBzYXZlX2NvbnRlbnRzOiB7fSwKICAgICAgfTsKICAgIH0gLAogIG1ldGhvZHMgOiB7CiAgICBnZXRfY29udGVudHMoKSB7CiAgICAgIHRoaXMubG9hZCA9IHRydWU7CiAgICAgIHJldHVybiB0aGlzLmF4aW9zLmdldCh0aGlzLnVybCkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgbGV0IGNvbnRlbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvLyDphY3liJfov73liqAKICAgICAgICAgIHRoaXMuY29udGVudHMgPSBjb250ZW50czsKICAgICAgICAgIHRoaXMubG9hZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVfc2F2ZShjb250ZW50KSB7CiAgICAgIGxldCBjb250ZW50X2lkID0gY29udGVudC5wb3N0X2lkOwogICAgICBpZih0aGlzLnNhdmVfY29udGVudHMubGVuZ3RoKSB7CiAgICAgICAgdmFyIGlkX2luY2x1ZGUgPSB0aGlzLmlzX2luY2x1ZGVfaWQoY29udGVudF9pZCk7CiAgICAgIH0KICAgICAgLy8g5L+d5a2Y44GV44KM44Gm44GE44Gf44KJCiAgICAgIGlmKGlkX2luY2x1ZGUpIHsKICAgICAgICAvLyDphY3liJfjgYvjgonliYrpmaQKICAgICAgICB0aGlzLnNhdmVfY29udGVudHMgPSB0aGlzLnNhdmVfY29udGVudHMuZmlsdGVyKGNvbnRlbnQgPT4gY29udGVudC5wb3N0X2lkICE9PSBjb250ZW50X2lkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDphY3liJfjgavov73liqAKICAgICAgICBpZih0aGlzLnNhdmVfY29udGVudHMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnNhdmVfY29udGVudHMucHVzaChjb250ZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zYXZlX2NvbnRlbnRzID0gW2NvbnRlbnRdOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnBvc3Rfc2F2ZV9jb250ZW50cyh0aGlzLnNhdmVfY29udGVudHMpOwogICAgfSwKICAgIGdldF9zYXZlX2NvbnRlbnRzKCkgewogICAgICBsZXQgY29udGVudHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlX2NvbnRlbnRzJykpOwogICAgICBpZihjb250ZW50cykgewogICAgICAgIHRoaXMuc2F2ZV9jb250ZW50cyA9IGNvbnRlbnRzOwogICAgICB9CiAgICB9LAogICAgcG9zdF9zYXZlX2NvbnRlbnRzKGNvbnRlbnRzKSB7CiAgICAgIGNvbnRlbnRzID0gSlNPTi5zdHJpbmdpZnkoY29udGVudHMpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2F2ZV9jb250ZW50cycsIGNvbnRlbnRzKTsKICAgIH0sCiAgICBpc19pbmNsdWRlX2lkKGNvbnRlbnRfaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZV9jb250ZW50cy5maW5kKGNvbnRlbnQgPT4gY29udGVudC5wb3N0X2lkID09PSBjb250ZW50X2lkKTsKICAgIH0KICB9LAogIG1vdW50ZWQgOiBmdW5jdGlvbigpIHsKICAgIHRoaXMudXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9iYWNrLWVuZC5xaWl0YS1teS1yYW5raW5nLm9ubGluZS9hcGkvcmFua2luZycpOwogICAgdGhpcy5nZXRfY29udGVudHMoKTsKICAgIHRoaXMuZ2V0X3NhdmVfY29udGVudHMoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb250ZW50X2RhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpOwogICAgICAgIGxldCBkYXRlX3N0cmluZyA9IGAke2RhdGUuZ2V0RnVsbFllYXIoKX0uJHtkYXRlLmdldE1vbnRoKCkgKyAxfS4ke2RhdGUuZ2V0RGF0ZSgpfeaKleeov2A7CiAgICAgICAgcmV0dXJuIGRhdGVfc3RyaW5nOwogICAgICB9CiAgICB9LAogICAgaXNfc2F2ZV9jb250ZW50OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgaWYodGhpcy5zYXZlX2NvbnRlbnRzLmxlbmd0aCkgewogICAgICAgICAgdmFyIGlzX2luY2x1ZGUgPSB0aGlzLmlzX2luY2x1ZGVfaWQoaWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpc19pbmNsdWRlID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmKGlzX2luY2x1ZGUpIHsKICAgICAgICAgIHJldHVybiAnY2lyY2xlIHNhdmUnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJ2NpcmNsZSc7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["NewRank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewRank.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"NewRank\">\n    <div class=\"load\">\n      <div v-if=\"load\" class=\"component_load_circle\"></div>\n    </div>\n    <!-- <div class=\"btns\">\n      <button @click=\"search(7)\" class=\"component_btn primary\">週間</button>\n      <button @click=\"search(30)\" class=\"component_btn primary\">月間</button>\n    </div> -->\n    <a class=\"content\" v-for=\"item in contents\" :href=\"item.post_url\" :key=\"item.post_id\">\n      <div class=\"top\">\n        <div class=\"left\">\n          <p class=\"date\">{{ content_date(item) }}</p>\n          <p class=\"title\">{{ item.title }}</p>\n          <div class=\"tags\">\n            <span v-for=\"tag in item.tags\" :key=\"tag.id\">{{ tag.name }}</span>\n          </div>\n        </div>\n        <div class=\"right\" >\n          <div @click.prevent=\"toggle_save(item)\" :class=\"is_save_content(item.post_id)\">\n            <div class=\"bookmark\">\n            <img src=\"@/assets/img/bookmark.png\" alt=\"\">\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"bottom\">\n        <div class=\"user\">\n          <img :src=\"item.user_image_url\" alt=\"\">\n          <span>{{ item.user_name }}</span>\n        </div>\n        <div class=\"good\">\n          <img src=\"@/assets/img/good.png\" alt=\"\">\n          <span>{{ item.likes_count }}</span>\n        </div>\n      </div>\n    </a>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n      return {\n        url: '',\n        contents: {},\n        load: false ,\n        save_contents: {},\n      };\n    } ,\n  methods : {\n    get_contents() {\n      this.load = true;\n      return this.axios.get(this.url)\n      .then((response) => {\n        let contents = response.data;\n        // 配列追加\n          this.contents = contents;\n          this.load = false;\n      });\n    },\n    toggle_save(content) {\n      let content_id = content.post_id;\n      if(this.save_contents.length) {\n        var id_include = this.is_include_id(content_id);\n      }\n      // 保存されていたら\n      if(id_include) {\n        // 配列から削除\n        this.save_contents = this.save_contents.filter(content => content.post_id !== content_id);\n      } else {\n        // 配列に追加\n        if(this.save_contents.length) {\n          this.save_contents.push(content);\n        } else {\n          this.save_contents = [content];\n        }\n      }\n      this.post_save_contents(this.save_contents);\n    },\n    get_save_contents() {\n      let contents = JSON.parse(localStorage.getItem('save_contents'));\n      if(contents) {\n        this.save_contents = contents;\n      }\n    },\n    post_save_contents(contents) {\n      contents = JSON.stringify(contents);\n      localStorage.setItem('save_contents', contents);\n    },\n    is_include_id(content_id) {\n      return this.save_contents.find(content => content.post_id === content_id);\n    }\n  },\n  mounted : function() {\n    this.url = new URL('https://back-end.qiita-my-ranking.online/api/ranking');\n    this.get_contents();\n    this.get_save_contents();\n  },\n  computed: {\n    content_date: function() {\n        return function(item) {\n        let date = new Date(item.created_at);\n        let date_string = `${date.getFullYear()}.${date.getMonth() + 1}.${date.getDate()}投稿`;\n        return date_string;\n      }\n    },\n    is_save_content: function() {\n      return function(id) {\n        if(this.save_contents.length) {\n          var is_include = this.is_include_id(id);\n        } else {\n          is_include = false;\n        }\n        if(is_include) {\n          return 'circle save';\n        } else {\n          return 'circle';\n        }\n      }\n    }\n  }\n}\n</script>\n<style>\n  @import \"../assets/css/style.css\";\n  @import \"../assets/css/content.css\";\n</style>"]}]}