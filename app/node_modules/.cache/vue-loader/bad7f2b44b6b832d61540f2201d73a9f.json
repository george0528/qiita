{"remainingRequest":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\src\\views\\Rank.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\src\\views\\Rank.vue","mtime":1628621154036},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleph\\OneDrive\\Lesson\\qiita_ranking\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgc2VhcmNoX2NvbnRlbnRzOiB7fSwNCiAgICAgICAgICAgICAgICBzZWFyY2hfa2V5d29yZDogJycsDQogICAgICAgICAgICAgICAgc2VhcmNoX3VybDogJycsDQogICAgICAgICAgICAgICAgc2VhcmNoX2RheXM6IDcsDQogICAgICAgICAgICAgICAgc2VsZWN0X2RhdGU6ICcnLA0KICAgICAgICAgICAgICAgIHVybDogJycsDQogICAgICAgICAgICAgICAgcGVyX3BhZ2U6IDIwLA0KICAgICAgICAgICAgICAgIHBhZ2U6IDEsDQogICAgICAgICAgICAgICAgcXVlcnlfcGFyYW06ICcnLA0KICAgICAgICAgICAgICAgIGNvbnRlbnRzOiB7fSwNCiAgICAgICAgICAgICAgICBsb2FkOiBmYWxzZSAsDQogICAgICAgICAgICB9Ow0KICAgICAgICB9ICwNCiAgICBtZXRob2RzIDogew0KICAgICAgICBiYXNlX3VybF9zZXQoKSB7DQogICAgICAgICAgICB0aGlzLnVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vcWlpdGEuY29tL2FwaS92Mi9pdGVtcycpOw0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHRoaXMudXJsLnNlYXJjaFBhcmFtczsNCiAgICAgICAgICAgIHBhcmFtcy5zZXQoJ3Blcl9wYWdlJywgdGhpcy5wZXJfcGFnZSk7DQogICAgICAgICAgICBwYXJhbXMuc2V0KCdwYWdlJywgdGhpcy5wYWdlKTsNCiAgICAgICAgICAgIHRoaXMucXVlcnlfcGFyYW0gPSBgc3RvY2tzOj4ke3RoaXMuc2VhcmNoX2RheXN9YDsNCiAgICAgICAgICAgIHZhciBkYXkgPSB0aGlzLmdldF9kYXRlKHRoaXMuc2VhcmNoX2RheXMpOw0KICAgICAgICAgICAgdGhpcy5xdWVyeV9wYXJhbV9zZXQoZGF5KTsNCiAgICAgICAgICAgIGlmKHRoaXMucXVlcnlfcGFyYW0pIHsNCiAgICAgICAgICAgICAgICBwYXJhbXMuc2V0KCdxdWVyeScsIHRoaXMucXVlcnlfcGFyYW0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIHNlYXJjaChkYXlzKSB7DQogICAgICAgIC8vICAgICB2YXIgZGF5ID0gdGhpcy5nZXRfZGF0ZSh0aGlzLnNlYXJjaF9kYXlzKTsNCiAgICAgICAgLy8gICAgIGxldCBwYXJhbXMgPSB0aGlzLnVybC5zZWFyY2hQYXJhbXM7DQogICAgICAgIC8vIH0sDQogICAgICAgIHF1ZXJ5X3BhcmFtX3NldChwYXJhbSkgew0KICAgICAgICAgICAgdGhpcy5xdWVyeV9wYXJhbSA9IHRoaXMucXVlcnlfcGFyYW0rcGFyYW07DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGdldF9jb250ZW50cygpIHsNCiAgICAgICAgICAgIHRoaXMubG9hZCA9IHRydWU7DQogICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5heGlvcy5nZXQodGhpcy51cmwsew0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsiQXV0aG9yaXphdGlvbiI6IkJlYXJlciA1ZmJlNzdlMGFjZDFjYjM0YjJkMmUwODc3YjY4ZmFiNjcyOWNhMjUxIn0sDQogICAgICAgICAgICAgICAgZGF0YToge30sDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IGNvbnRlbnRzID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50cyk7DQogICAgICAgICAgICAgICAgLy8g6YWN5YiX44GM56m644Gu5pmCDQogICAgICAgICAgICAgICAgaWYoIWNvbnRlbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6YWN5YiX44GM56m644Gn44GZ44CB5pyA5b6M44Gu6YWN5YiX44Gn44GZJyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydF9saWtlKHRoaXMuY29udGVudHMpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRzLnNwbGljZSgyMCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoX2NvbnRlbnRzID0gdGhpcy5jb250ZW50czsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8g6YWN5YiX6L+95YqgDQogICAgICAgICAgICAgICAgaWYodGhpcy5jb250ZW50cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50cyA9IHRoaXMuY29udGVudHMuY29uY2F0KGNvbnRlbnRzKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRzID0gY29udGVudHM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIOacgOW+jA0KICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRzLmxlbmd0aCA8IHRoaXMucGVyX3BhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0X2xpa2UodGhpcy5jb250ZW50cyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudHMuc3BsaWNlKDIwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hfY29udGVudHMgPSB0aGlzLmNvbnRlbnRzOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBnZXRfZGF0ZShkYXkpIHsNCiAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgdmFyIHNlbGVjdF9kYXRlID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpIC0gZGF5KTsNCiAgICAgICAgICAgIHZhciBxdWVyeV9zZWxlY3RfZGF0ZSA9IGAgY3JlYXRlZDo+PSR7c2VsZWN0X2RhdGUuZ2V0RnVsbFllYXIoKX0tJHtzZWxlY3RfZGF0ZS5nZXRNb250aCgpICsgMX0tJHtzZWxlY3RfZGF0ZS5nZXREYXRlKCl9YDsNCiAgICAgICAgICAgIHJldHVybiBxdWVyeV9zZWxlY3RfZGF0ZTsNCiAgICAgICAgfSwNCiAgICAgICAgc29ydF9saWtlKGNvbnRlbnRzKSB7DQogICAgICAgICAgICBjb250ZW50cy5zb3J0KGZ1bmN0aW9uKGEsYikgew0KICAgICAgICAgICAgICAgIGlmKGEubGlrZXNfY291bnQgPiBiLmxpa2VzX2NvdW50KSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCA6IGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgbG9vcF9mbGFnID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5iYXNlX3VybF9zZXQoKTsNCiAgICAgICAgd2hpbGUobG9vcF9mbGFnKSB7DQogICAgICAgICAgICBsb29wX2ZsYWcgPSBhd2FpdCB0aGlzLmdldF9jb250ZW50cygpOw0KICAgICAgICAgICAgdGhpcy5wYWdlKys7DQogICAgICAgICAgICBsZXQgcGFyYW1zID0gdGhpcy51cmwuc2VhcmNoUGFyYW1zOw0KICAgICAgICAgICAgcGFyYW1zLnNldCgncGFnZScsIHRoaXMucGFnZSk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNvbnRlbnRzX2xlbmd0aDogZnVuY3Rpb24gKCl7DQogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zZWFyY2hfY29udGVudHMpLmxlbmd0aDsNCiAgICAgICAgfSwNCiAgICAgICAgY29udGVudF9kYXRlOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbSkgew0KICAgICAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoaXRlbS5jcmVhdGVkX2F0KTsNCiAgICAgICAgICAgICAgICBsZXQgZGF0ZV9zdHJpbmcgPSBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LiR7ZGF0ZS5nZXRNb250aCgpICsgMX0uJHtkYXRlLmdldERhdGUoKX3mipXnqL9gOw0KICAgICAgICAgICAgICAgIHJldHVybiBkYXRlX3N0cmluZzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Rank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Rank.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"Rank\">\r\n        <!-- <h2>{{url}}</h2> -->\r\n        <div class=\"load\">\r\n            <div v-if=\"load\" class=\"component_load_circle\"></div>\r\n        </div>\r\n        <!-- <div class=\"btns\">\r\n            <button @click=\"search(7)\" class=\"component_btn primary\">週間</button>\r\n            <button @click=\"search(30)\" class=\"component_btn primary\">月間</button>\r\n        </div> -->\r\n        <a class=\"content\" v-for=\"item in search_contents\" :href=\"item.url\" :key=\"item.id\">\r\n            <div class=\"left\">\r\n                <p class=\"date\">{{ content_date(item) }}</p>\r\n                <p class=\"title\">{{ item.title }}</p>\r\n                <div class=\"tags\">\r\n                    <span v-for=\"tag in item.tags\" :key=\"tag.id\">{{ tag.name }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"right\"></div>\r\n            <div class=\"bottom\">\r\n                <div class=\"user\">\r\n                    <img :src=\"item.user.profile_image_url\" alt=\"\">\r\n                    <span>{{ item.user.name }}</span>\r\n                </div>\r\n                <div class=\"good\">\r\n                    <img src=\"@/assets/img/good.png\" alt=\"\">\r\n                    <span>{{ item.likes_count }}</span>\r\n                </div>\r\n            </div>\r\n        </a>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n            return {\r\n                search_contents: {},\r\n                search_keyword: '',\r\n                search_url: '',\r\n                search_days: 7,\r\n                select_date: '',\r\n                url: '',\r\n                per_page: 20,\r\n                page: 1,\r\n                query_param: '',\r\n                contents: {},\r\n                load: false ,\r\n            };\r\n        } ,\r\n    methods : {\r\n        base_url_set() {\r\n            this.url = new URL('https://qiita.com/api/v2/items');\r\n            let params = this.url.searchParams;\r\n            params.set('per_page', this.per_page);\r\n            params.set('page', this.page);\r\n            this.query_param = `stocks:>${this.search_days}`;\r\n            var day = this.get_date(this.search_days);\r\n            this.query_param_set(day);\r\n            if(this.query_param) {\r\n                params.set('query', this.query_param)\r\n            }\r\n        },\r\n        // search(days) {\r\n        //     var day = this.get_date(this.search_days);\r\n        //     let params = this.url.searchParams;\r\n        // },\r\n        query_param_set(param) {\r\n            this.query_param = this.query_param+param;\r\n        },\r\n        async get_contents() {\r\n            this.load = true;\r\n            return await this.axios.get(this.url,{\r\n                headers: {\"Authorization\":\"Bearer 5fbe77e0acd1cb34b2d2e0877b68fab6729ca251\"},\r\n                data: {},\r\n            })\r\n            .then((response) => {\r\n                let contents = response.data;\r\n                console.log(contents);\r\n                // 配列が空の時\r\n                if(!contents.length) {\r\n                    console.log('配列が空です、最後の配列です');\r\n                    this.sort_like(this.contents);\r\n                    this.contents.splice(20);\r\n                    this.search_contents = this.contents;\r\n                    this.load = false;\r\n                    return false;\r\n                }\r\n                // 配列追加\r\n                if(this.contents.length) {\r\n                    this.contents = this.contents.concat(contents);\r\n                } else {\r\n                    this.contents = contents;\r\n                }\r\n                // 最後\r\n                if(contents.length < this.per_page) {\r\n                    this.sort_like(this.contents);\r\n                    this.contents.splice(20);\r\n                    this.search_contents = this.contents;\r\n                    this.load = false;\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            });\r\n        },\r\n        get_date(day) {\r\n            var now = new Date();\r\n            var select_date = new Date(now.getFullYear(), now.getMonth(), now.getDate() - day);\r\n            var query_select_date = ` created:>=${select_date.getFullYear()}-${select_date.getMonth() + 1}-${select_date.getDate()}`;\r\n            return query_select_date;\r\n        },\r\n        sort_like(contents) {\r\n            contents.sort(function(a,b) {\r\n                if(a.likes_count > b.likes_count) {\r\n                    return -1;\r\n                } else {\r\n                    return 1;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted : async function() {\r\n        var loop_flag = true;\r\n        this.base_url_set();\r\n        while(loop_flag) {\r\n            loop_flag = await this.get_contents();\r\n            this.page++;\r\n            let params = this.url.searchParams;\r\n            params.set('page', this.page);\r\n        }\r\n    },\r\n    computed: {\r\n        contents_length: function (){\r\n            return Object.keys(this.search_contents).length;\r\n        },\r\n        content_date: function() {\r\n                return function(item) {\r\n                let date = new Date(item.created_at);\r\n                let date_string = `${date.getFullYear()}.${date.getMonth() + 1}.${date.getDate()}投稿`;\r\n                return date_string;\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    @import \"../assets/css/style.css\";\r\n    a {\r\n        color: black;\r\n        text-decoration: none;\r\n        text-align: left;\r\n        font-size: 0.8rem;\r\n    }\r\n    p {\r\n        margin: 0;\r\n    }\r\n    span {\r\n        font-size: 0.7rem;\r\n    }\r\n    .load {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 10px 0;\r\n    }\r\n    a.contenet{\r\n        width: 100vw;\r\n    }\r\n    .content .left {\r\n        width: 90%;\r\n    }\r\n    .content .left .date {\r\n        color: gray;\r\n        font-size: 0.7rem;\r\n    }\r\n    .content .left .title {\r\n        font-weight: bold;\r\n        padding: 0;\r\n        margin: 2.5px 0;\r\n        display: flex;\r\n        align-items: center;\r\n        /* max-height: 37px;\r\n        overflow: hidden; */\r\n    }\r\n    .content .left .tags {\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n    }\r\n    .content .left .tags span {\r\n        margin-right: 4px;\r\n        color: gray;\r\n    }\r\n    .content .bottom {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        height: 40px;\r\n        margin: 2.5px 0;\r\n    }\r\n    .content .bottom .user {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    .content .bottom .user img {\r\n        display: block;\r\n        width: 25px;\r\n        height: auto;\r\n        margin-right: 10px;\r\n        border-radius: 50%;\r\n    }\r\n    .content .bottom .good {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    .content .bottom .good span {\r\n        display: block;\r\n        margin:0 5px;\r\n    }\r\n    .content .bottom .good img{\r\n        display: block;\r\n        margin:0 5px;\r\n        width: 15px;\r\n    }\r\n</style>"]}]}